<?xml version="1.0" encoding="US-ASCII" ?>
<!--
 -*- mode: Fundamental; tab-width: 4; -*-
 ex:ts=4

 $Id$
-->

<project name="xins" default="all" basedir=".">

	<target name="-xmlenc-avail">
		<available classname="org.znerd.xmlenc.XMLOutputter" property="xmlenc.available" />
		<fail unless="xmlenc.available" message="Library not available: xmlenc" />
	</target>

	<target name="-servlet-avail">
		<available classname="javax.servlet.http.HttpServletRequest" property="servlet.available" />
		<fail unless="servlet.available" message="Library not available: Servlet API" />
	</target>

	<target name="-prepare">
		<mkdir dir="build" />
	</target>

	<target name="-prepare-classes" depends="-prepare">
		<mkdir dir="build/classes" />
	</target>

	<target name="clean" description="Removes all generated files">
		<delete dir="build" />
	</target>

	<target name="java-server-framework" depends="-xmlenc-avail,-servlet-avail,-prepare-classes" description="Compiles the XINS/Java server framework">
		<mkdir dir="build/classes/java-server-framework" />
		<javac
		srcdir="src/java-server-framework"
		destdir="build/classes/java-server-framework"
		debug="on"
		deprecation="on"
		optimize="off"
		target="1.2" />
	</target>

	<target name="all" depends="java-server-framework" description="Generates everything" />

</project>
