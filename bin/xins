#!/bin/sh
#
# -*- mode: Fundamental; tab-width: 4; -*-
# ex:ts=4
#
# $Id$
#
# Converts xins-project.xml in the current directory to an Ant build file and
# then passes control to Ant.
#

# Make sure XINS_HOME is set
xins_home=${XINS_HOME}
guessed_xins_home=false
if [ "${xins_home}a" = "a" ]; then
	echo "${prog}: ERROR: XINS_HOME not set. Guessing."
	xins_home=`dirname $0`
	while [ ! `basename ${xins_home}` = "xins" ]; do
		xins_home=`dirname ${xins_home}`
	done
	if [ "${xins_home}a" = "a" ]; then
		echo "${prog}: FATAL: XINS_HOME not set and unable to guess."
		exit 1
	fi
	echo "${prog}: INFO: Assuming XINS_HOME is ${xins_home}."
	guessed_xins_home=true
fi

if [ "$1" = "-version" ]; then
	ant -q -f ${xins_home}/build.xml version
	exit 1
fi

ant -q -f ${xins_home}/src/ant/make-build.xml \
-Dxins_home=${xins_home}

# Run Ant against the build file
ant -f build/build.xml $*
