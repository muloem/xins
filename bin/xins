#!/bin/sh
#
# -*- mode: Fundamental; tab-width: 4; -*-
# ex:ts=4
#
# $Id$
#
# Converts xins-project.xml in the current directory to an Ant build file and
# then executes that Ant build file.
#

# Make sure XINS_HOME is set
if [ "${XINS_HOME}" = "" ]; then
	echo "`basename $0`: FATAL: XINS_HOME not set."
	exit 1
fi

# Recognize version option
if [ "$1" = "-version" ] || [ "$1" = "version" ]; then
	ant -q -f ${XINS_HOME}/build.xml version
	exit 0
fi

# Recognize clean option
# Fix for SF.net bug #1110726: Invalid generated build.xml can't be removed with xins clean
if [ "$1" = "clean" ] && [ -f build/build.xml ]; then
	rm build/build.xml
fi

# Generate the Ant build file and execute it
ant -lib ${XINS_HOME}/lib -f ${XINS_HOME}/src/ant/bootstrap.xml -Dxins_home="${XINS_HOME}" -Dpwd="`pwd`" -Dargs="$*"
